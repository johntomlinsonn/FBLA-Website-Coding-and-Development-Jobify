<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Jobify</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/globals.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="/static/images/favicon.png">
    <script src="https://kit.fontawesome.com/1eba5d9115.js" crossorigin="anonymous"></script>
    <style>
        .center-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="container">
            <!-- Website Title -->
            <div class="h2container">
                <a href="{% url 'index' %}"><i class="fa-solid fa-money-bill-wave fa-2xl" style="color:#f83c20 ; margin-right: 5px;"></i></a>
                <a href="{% url 'index' %}" style="text-decoration: none;"><h2>Jobify</h2></a>
            </div>
            <!-- Buttons Container -->
            <div class="buttons-container center-buttons">
                <a href="{% url 'index' %}" style="text-decoration: none;"><button id="post-job">Home<i class="fa-solid fa-house" style="color: #ffffff; margin-left: 25%;"></i></button></a>
                {% if user.is_staff or user.is_superuser %}
                    <a href="{% url 'admin_panel' %}" style="text-decoration: none;"><button id="admin-panel">Admin Panel <i class="fa-solid fa-toolbox" style="color: #ffffff; margin-left: 15%;"></i></button></a>
                {% endif %}
                <a href="{% url 'signout' %}" style="text-decoration: none;"><button id="sign-in">Sign Out <i class="fa-solid fa-arrow-right-from-bracket" style="color: #ffffff;margin-left: 15%;"></i></button></a>
            </div>
        </div>
    </header>

    <!-- Main Content Section -->
    <main class="admin-main">
        <div class="container">
            <h1>Admin Panel</h1>
            <div class="job-cards-container">
                {% for job in job_postings %}
                    <div class="job-card">
                        <h3>{{ job.title }}</h3>
                        <p><strong>Company:</strong> {{ job.company_name }}</p>
                        <p><strong>Location:</strong> {{ job.location }}</p>
                        <p><strong>Salary:</strong> {{ job.salary }}</p>
                        <p><strong>Job Grade:</strong> {{ job.grade}}</p>
                        <button class="job-description-button" style="display: block; margin: 0 auto;">Show Job Description</button>
                        <p class = "job-description">{{ job.description }}</p>
                        <p><strong>Status:</strong> {{ job.status }}</p>
                        <div class="actions center-buttons">
                            {% if job.status != 'approved' %}
                                <a href="{% url 'approve_job' job.id %}" class="btn btn-success">Approve</a>
                            {% endif %}
                            {% if job.status != 'denied' %}
                                <a href="{% url 'deny_job' job.id %}" class="btn btn-warning">Deny</a>
                            {% endif %}
                            <a href="{% url 'delete_job' job.id %}" class="btn btn-danger">Delete</a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </main>

    <!-- Footer Section -->
    <footer>
        <div class="container">
            <p>Developed by Jack and Mohnish</p>
            <p>Terms of Service</p>
            <p>Privacy Policy</p>
            <p>Cookie Policy</p>
            <p>Ads info</p>
            <p>More</p>
            <p>Job Portal Company Details</p>
        </div>
    </footer>
    <script src="{% static 'js/jobdescription.js' %}"></script>
    <script>
        window.embeddedChatbotConfig = {
            chatbotId: "K05nNPTlJnV2SiHKD-nqs",
            domain: "www.chatbase.co"
        }
    </script>
    <script
        src="https://www.chatbase.co/embed.min.js"
        chatbotId="K05nNPTlJnV2SiHKD-nqs"
        domain="www.chatbase.co"
        defer>
    </script>
</body>
</html>