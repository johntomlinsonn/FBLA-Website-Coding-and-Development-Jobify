<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Search Results - Jobify</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/globals.css' %}">
    <link rel="stylesheet" href="{% static 'css/searchresults.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="/static/images/favicon.png">
    <script src="https://kit.fontawesome.com/1eba5d9115.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="jobify-container">
        <!-- Header -->
        <header class="header">
            <div class="header-container">
                <a href="{% url 'index' %}" class="logo">
                    <i class="fa-solid fa-money-bill-wave logo-icon"></i>
                    <span class="logo-text">Jobify</span>
                </a>
                <nav class="main-nav">
                    <a href="{% url 'search' %}" class="nav-link">Find Jobs</a>
                    <a href="#" class="nav-link">Companies</a>
                    <a href="#" class="nav-link">Resources</a>
                    <a href="#" class="nav-link">About Us</a>
                </nav>
                <div class="header-buttons">
                    {% if user.is_authenticated %}
                        <a href="{% url 'account' %}" class="btn btn-outline">Account</a>
                        <a href="{% url 'postjob' %}" class="btn btn-outline">Post a Job</a>
                        {% if user.is_staff or user.is_superuser %}
                            <a href="{% url 'admin_panel' %}" class="btn btn-primary">Admin Panel</a>
                        {% endif %}
                    {% else %}
                        <a href="{% url 'postjob' %}" class="btn btn-outline">Post a Job</a>
                        <a href="{% url 'signin' %}" class="btn btn-outline">Register</a>
                        <a href="{% url 'signin' %}" class="btn btn-primary">Log In</a>
                    {% endif %}
                </div>
            </div>
        </header>

        <!-- Search Bar -->
        <div class="search-bar-container">
            <div class="search-bar-wrapper">
                <form action="{% url 'search' %}" method="get" class="search-bar">
                    <div class="search-input-wrapper">
                        <i class="fa-solid fa-magnifying-glass search-icon-input"></i>
                        <input type="search" name="search" class="search-input" placeholder="Job title, company, or keywords" value="{{ request.GET.search }}">
                        {% if request.GET.search %}
                            <button type="button" class="clear-search-btn" onclick="this.form.search.value='';this.form.submit();">
                                <i class="fa-solid fa-times"></i>
                            </button>
                        {% endif %}
                    </div>
                    <button type="submit" class="search-button">
                        <i class="fa-solid fa-magnifying-glass search-icon"></i>
                        Search Jobs
                    </button>
                </form>
            </div>
        </div>

        <!-- Main Content -->
        <main class="search-results-main">
            <div class="search-results-container">
                <!-- Search Info -->
                <div class="search-info">
                    <h2 class="search-results-title">
                        {% if request.GET.search %}
                            Search Results for "{{ request.GET.search }}"
                        {% else %}
                            All Available Jobs
                        {% endif %}
                        <span>({{ job_postings|length }} jobs found)</span>
                    </h2>
                </div>

                <!-- Job Results -->
                <div class="job-results-list">
                    {% for job in job_postings %}
                        <a href="{% url 'apply' job.id %}" class="job-result-card {% if job.featured %}featured-job{% endif %}">
                            <div class="job-result-header">
                                <div class="job-result-company">
                                    <div class="company-info">
                                        <h3 class="company-name">{{ job.company_name }}</h3>
                                        <div class="company-rating">
                                            <div class="stars">
                                                {% for i in "12345" %}
                                                    <i class="fa-solid fa-star star-icon {% if forloop.counter <= 4 %}filled{% endif %}"></i>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <button class="bookmark-button">
                                    <i class="fa-regular fa-bookmark"></i>
                                </button>
                            </div>
                            
                            <div class="job-result-content">
                                <h3 class="job-title">{{ job.title }}</h3>
                                <div class="job-details">
                                    <div class="job-detail">
                                        <i class="fa-solid fa-location-dot detail-icon"></i>
                                        <span>{{ job.location }}</span>
                                    </div>
                                    <div class="job-detail">
                                        <i class="fa-solid fa-money-bill detail-icon"></i>
                                        <span>{{ job.salary }}</span>
                                    </div>
                                    <div class="job-detail">
                                        <i class="fa-regular fa-clock detail-icon"></i>
                                        <span>{{ job.created_at|timesince }} ago</span>
                                    </div>
                                </div>
                                <p class="job-description">{{ job.description|truncatewords:50 }}</p>
                            </div>
                            
                            <div class="job-result-footer">
                                <span class="job-type">{{ job.job_type|default:"Full-time" }}</span>
                                <button class="apply-now-button">Apply Now</button>
                            </div>
                        </a>
                    {% empty %}
                        <div class="no-results">
                            <i class="fa-solid fa-search fa-3x"></i>
                            <h3>No jobs found</h3>
                            <p>Try adjusting your search criteria or browse all available jobs.</p>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-container">
                <div class="footer-column">
                    <a href="/" class="logo">
                        <i class="fa-solid fa-money-bill-wave logo-icon"></i>
                        <span class="logo-text">Jobify</span>
                    </a>
                    <p class="footer-text">Connecting students with their dream jobs.</p>
                </div>
                <div class="footer-column">
                    <h3 class="footer-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="{% url 'search' %}">Browse Jobs</a></li>
                        <li><a href="{% url 'postjob' %}">Post a Job</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="copyright">Â© {% now 'Y' %} Jobify. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <script>
        // Handle bookmark button clicks
        document.querySelectorAll('.bookmark-button').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                button.querySelector('i').classList.toggle('fa-solid');
            });
        });
    </script>
</body>
</html>